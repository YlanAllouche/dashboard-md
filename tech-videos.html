<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tech Videos</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='m12 14 4-4'/%3E%3Cpath d='M3.34 19a10 10 0 1 1 17.32 0'/%3E%3C/svg%3E">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap">
    <style>
        /* CSS variables
   Generated by 'wal' */
:root {
    --wallpaper: url("None");

    /* Special */
    --background: #000000;
    --foreground: #b5b3aa;
    --cursor: #b5b3aa;

    /* Colors */
    --color0: #000000;
    --color1: #ff6c60;
    --color2: #a8ff60;
    --color3: #ffffb6;
    --color4: #96cbfe;
    --color5: #ff73fd;
    --color6: #c6c5fe;
    --color7: #b5b3aa;
    --color8: #6c6c66;
    --color9: #ff6c60;
    --color10: #a8ff60;
    --color11: #ffffb6;
    --color12: #96cbfe;
    --color13: #ff73fd;
    --color14: #c6c5fe;
    --color15: #fdfbee;
}


        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: var(--background);
            color: var(--foreground);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .header h1 {
            color: var(--foreground);
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .header p {
            color: var(--color7);
            font-size: 1.1rem;
        }

        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
            gap: 1.5rem;
        }

        .video-card {
            background: var(--color0);
            border-radius: 0;
            box-shadow: none;
            transition: all 0.2s;
            overflow: hidden;
            border: 1px solid var(--color7);
        }

        .video-card:hover {
            border-color: var(--color4);
        }

        .thumbnail-container {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%;
            overflow: hidden;
            background: var(--color8);
            cursor: pointer;
        }

        .thumbnail {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s;
        }

        .video-card:hover .thumbnail {
            transform: scale(1.05);
        }

        .duration-badge {
            position: absolute;
            bottom: 8px;
            right: 8px;
            background: var(--color0);
            color: var(--foreground);
            padding: 4px 8px;
            border-radius: 0;
            font-size: 0.75rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 3px;
            border: 1px solid var(--color7);
        }

        .youtube-link-badge {
            background: var(--color0);
            color: var(--foreground);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--color7);
            text-decoration: none;
            transition: all 0.2s;
            margin: 0 8px;
        }

        .youtube-link-badge:hover {
            border-color: var(--color4);
        }

        .deep-link-badge {
            background: var(--color0);
            color: var(--foreground);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--color7);
            text-decoration: none;
            transition: all 0.2s;
        }

        .deep-link-badge:hover {
            border-color: var(--color4);
        }

        .card-content {
            padding: 1rem;
        }

        .video-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--foreground);
            margin-bottom: 0.5rem;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .video-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            font-size: 0.875rem;
            color: var(--color7);
        }

        .channel-name {
            font-weight: 500;
            color: var(--color7);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .video-date {
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .action-buttons {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .btn {
            flex: 1;
            padding: 0.5rem 0.75rem;
            border: 1px solid var(--color7);
            border-radius: 0;
            font-size: 0.8rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            text-transform: uppercase;
            letter-spacing: 0.025em;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            text-decoration: none;
            background: var(--color0);
            color: var(--foreground);
        }

        .btn-inbox {
            background: var(--color0);
            color: var(--foreground);
            border: 1px solid var(--color7);
        }

        .btn-inbox:hover {
            border-color: var(--color4);
        }

        .btn-inbox.active {
            background: var(--color4);
            color: var(--color0);
            border-color: var(--color4);
        }

        .btn-watched {
            background: var(--color0);
            color: var(--foreground);
            border: 1px solid var(--color7);
        }

        .btn-watched:hover {
            border-color: var(--color2);
        }

        .btn-watched.active {
            background: var(--color2);
            color: var(--color0);
            border-color: var(--color2);
        }

        .watched-indicator {
            position: absolute;
            top: 8px;
            left: 8px;
            width: 12px;
            height: 12px;
            background: var(--color2);
            border: 2px solid var(--color0);
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .video-card.watched .watched-indicator {
            opacity: 1;
        }

        .starred-button {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 40px;
            height: 40px;
            background: var(--color0);
            border: 2px solid var(--color7);
            border-radius: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            box-shadow: none;
        }

        .starred-button:hover {
            border-color: var(--color3);
        }

        .starred-button.active {
            color: var(--color3);
            border-color: var(--color3);
        }

        .starred-button.inactive {
            color: var(--color7);
        }

        .placeholder-thumbnail {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            background: var(--color8);
            color: var(--foreground);
        }

        .tag-toggles {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.4rem;
            margin-top: 0.5rem;
        }

        .tag-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 3px;
            padding: 0.4rem 0.5rem;
            border-radius: 0;
            font-size: 0.75rem;
            font-weight: 500;
            text-decoration: none;
            transition: all 0.2s;
            border: 1px solid var(--color7);
            background: var(--color0);
            color: var(--foreground);
            text-transform: uppercase;
            letter-spacing: 0.025em;
        }

        .tag-toggle:hover {
            border-color: var(--color4);
        }

        .tag-toggle.active {
            background: var(--color2);
            border-color: var(--color2);
            color: var(--color0);
        }

        .tag-toggle.inactive {
            background: var(--color1);
            border-color: var(--color1);
            color: var(--color0);
        }

        .stats {
            margin-bottom: 2rem;
            text-align: center;
            color: var(--color7);
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem 0.5rem;
            }

            .video-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .header h1 {
                font-size: 2rem;
            }

            .btn {
                font-size: 0.75rem;
                padding: 0.4rem 0.6rem;
            }

            .tag-toggle {
                font-size: 0.7rem;
                padding: 0.3rem 0.4rem;
            }

            .tag-toggles {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.3rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Tech Videos</h1>
        </div>
        
        <div class="stats" id="stats">
            <!-- Stats will be rendered here -->
        </div>
        
        <div class="video-grid" id="videoGrid">
            <!-- Videos will be rendered here -->
        </div>
    </div>

    <script>
        // Video data from JSON file
const videoData = [
        {
                "id": "da3281f8-14bd-47a9-ae31-eff7c86523c02",
                "summary": "Bun in 100 Seconds",
                "duration": 166,
                "channel": "Fireship",
                "date": "2026-01-22",
                "locator": "M4TufsFlv_o",
                "thumbnail": "https://i.ytimg.com/vi_webp/M4TufsFlv_o/maxresdefault.webp",
                "watched": false,
                "tags": [
                        "inbox",
                        "news"
                ],
                "file": "/example/notes/videos/da3281f8-14bd-47a9-ae31-eff7c86523c02.md",
                "line": 1
        },
        {
                "id": "ffd07f5f-e5a4-41d1-9fb2-54e47d926c4a",
                "summary": "This better be real, Intel...",
                "duration": 574,
                "channel": "TechLinked",
                "date": "2025-05-15",
                "locator": "IruOTeK9VP4",
                "thumbnail": "https://i.ytimg.com/vi_webp/IruOTeK9VP4/maxresdefault.webp",
                "watched": false,
                "tags": [
                        "news",
                        "inbox"
                ],
                "file": "/home/ylan/workspaces/repos/github/YlanAllouche/dashboard-md/share/notes/videos/ffd07f5f-e5a4-41d1-9fb2-54e47d926c4a.md",
                "line": 1
        },
        {
                "id": "192b22ca-d86a-46a0-9ef0-0e704ae51f73",
                "summary": "The World's Most Important Machine",
                "duration": 3300,
                "channel": "Veritasium",
                "date": "2025-12-31",
                "locator": "MiUHjLxm3V0",
                "thumbnail": "https://i.ytimg.com/vi_webp/MiUHjLxm3V0/maxresdefault.webp",
                "watched": false,
                "tags": [
                        "documentary"
                ],
                "file": "/home/ylan/workspaces/repos/github/YlanAllouche/dashboard-md/share/notes/videos/192b22ca-d86a-46a0-9ef0-0e704ae51f73.md",
                "line": 1
        },
        {
                "id": "847e10dc-f985-42ea-8496-581e6dd0b547",
                "summary": "This Should've Been Great - Ford Bronco Heritage Review",
                "duration": 799,
                "channel": "Zip Tie Tuning",
                "date": "2025-12-12",
                "locator": "KhY8XyJASAc",
                "thumbnail": "https://i.ytimg.com/vi/KhY8XyJASAc/maxresdefault.jpg",
                "watched": false,
                "tags": [
                        "inbox",
                        "documentary",
                        "car"
                ],
                "file": "/home/ylan/workspaces/repos/github/YlanAllouche/dashboard-md/share/notes/videos/847e10dc-f985-42ea-8496-581e6dd0b547.md",
                "line": 1
        },
        {
                "id": "ba7b04b1-8549-40fc-a1ce-e24df4f3ba27",
                "summary": "What GPU is the BEST for Linux Gaming?",
                "duration": 655,
                "channel": "Linus Tech Tips",
                "date": "2026-01-24",
                "locator": "u8Xyx2L4Nlg",
                "thumbnail": "https://i.ytimg.com/vi_webp/u8Xyx2L4Nlg/maxresdefault.webp",
                "watched": false,
                "tags": [
                        "inbox",
                        "documentary"
                ],
                "file": "/home/ylan/workspaces/repos/github/YlanAllouche/dashboard-md/share/notes/videos/ba7b04b1-8549-40fc-a1ce-e24df4f3ba27.md",
                "line": 1
        }
];

// Tags data from -tags.json
const tagsData = {
        "focus": "\ud83c\udfaf",
        "fun": "\ud83c\udf89",
        "tv": "\ud83d\udcfa",
        "walk": "\ud83d\udeb6",
        "bed": "\ud83d\udecc\ud83c\udffb",
        "tech": "\u2699\ufe0f"
};

const placeholderThumbnails = ['ðŸŽ¬', 'ðŸ“º', 'ðŸŽ¥', 'ðŸŽžï¸', 'ðŸ“¹', 'ðŸŽª', 'ðŸŽ­', 'ðŸŽ¨', 'ðŸŽ¯', 'ðŸŽ²'];

// Tag definitions from tagsData
const tagDefinitions = Object.entries(tagsData).map(([name, value]) => ({
    name,
    glyph: value,
    label: value
}));

function createObsidianLink(command) {
    const baseUrl = 'obsidian://advanced-uri?vault=share&eval=';
    return baseUrl + encodeURIComponent(command);
}

function createPlayLink(locator) {
    const command = `app.plugins.plugins["templater-obsidian"].templater.current_functions_object.user.captureMdPlay("${locator}")`;
    return createObsidianLink(command);
}

function createInboxWatchedToggleLink(id) {
    const command = `let tp = app.plugins.plugins["templater-obsidian"].templater.current_functions_object; tp.user.toggleInbox(tp, "${id}");tp.user.toggleWatched(tp,"${id}");`;
    return createObsidianLink(command);
}

function createInboxToggleLink(id) {
    const command = `let tp = app.plugins.plugins["templater-obsidian"].templater.current_functions_object; tp.user.toggleInbox(tp,"${id}");`;
    return createObsidianLink(command);
}

function createTagToggleLink(id, tag) {
    const command = `let tp = app.plugins.plugins["templater-obsidian"].templater.current_functions_object; tp.user.toggleTag(tp,"${id}", "${tag}");`;
    return createObsidianLink(command);
}

function createYouTubeLink(locator) {
    return `https://youtube.com/watch?v=${locator}`;
}

function createDeepLink(file, line) {
    const lineStr = String(line);
    const command = `let tp = app.plugins.plugins["templater-obsidian"].templater.current_functions_object; tp.user.openLineInNvim("${file}", ${lineStr});`;
    return createObsidianLink(command);
}

function formatDuration(seconds) {
    const hours = Math.floor(seconds / 3600);
    const minutes = Math.floor((seconds % 3600) / 60);
    const secs = seconds % 60;
    
    if (hours > 0) {
        return `${hours}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
    }
    return `${minutes}:${secs.toString().padStart(2, '0')}`;
}

function formatDate(dateString) {
    const date = new Date(dateString);
    return date.toLocaleDateString('en-US', { 
        month: 'short', 
        day: 'numeric', 
        year: 'numeric' 
    });
}

function createTagToggles(video) {
    return tagDefinitions.map(tagDef => {
        const isActive = video.tags?.includes(tagDef.name);
        const statusClass = isActive ? 'active' : 'inactive';
        const link = createTagToggleLink(video.id, tagDef.name);

        return `<a href="${link}" class="tag-toggle ${statusClass}" title="${tagDef.name}: ${isActive ? 'Active' : 'Inactive'}">
            ${tagDef.glyph}
        </a>`;
    }).join('');
}

function createVideoCard(video, index) {
    const isInboxActive = video.tags?.includes('inbox');
    const isWatched = video.watched;
    const isStarred = video.tags?.includes('starred');
    const watchedClass = isWatched ? 'watched' : '';

    const thumbnailContent = video.thumbnail
        ? `<img src="${video.thumbnail}" alt="${video.summary}" class="thumbnail" loading="lazy" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
           <div class="placeholder-thumbnail" style="display: none;">${placeholderThumbnails[index % placeholderThumbnails.length]}</div>`
        : `<div class="placeholder-thumbnail">${placeholderThumbnails[index % placeholderThumbnails.length]}</div>`;

            const playLink = createPlayLink(video.locator);
            const inboxWatchedLink = createInboxWatchedToggleLink(video.id);
            const inboxLink = createInboxToggleLink(video.id);
            const starredLink = createTagToggleLink(video.id, 'starred');
            const deepLink = video.file ? createDeepLink(`~/share/${video.file}`, video.line) : null;

    return `
        <div class="video-card ${watchedClass}" data-id="${video.id}">
            <div class="thumbnail-container">
                <a href="${playLink}" class="thumbnail-link">
                    ${thumbnailContent}
                </a>
                <a href="${starredLink}" class="starred-button ${isStarred ? 'active' : 'inactive'}" title="Toggle starred">
                    <span style="display:inline-flex;align-items:center;justify-content:center;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="${isStarred ? 'currentColor' : 'none'}" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-star-icon lucide-star" style="width:20px;height:20px;"><path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"/></svg>
                    </span>
                </a>
                <div class="duration-badge">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clock-icon lucide-clock" style="width:14px;height:14px;display:inline;"><path d="M12 6v6l4 2"/><circle cx="12" cy="12" r="10"/></svg> ${formatDuration(video.duration)}
                </div>
                <div class="watched-indicator"></div>
            </div>
            <div class="card-content">
                <h3 class="video-title">${video.summary}</h3>
                <div class="video-meta">
                    <span class="channel-name">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-icon lucide-user" style="width:14px;height:14px;display:inline;margin-right:4px;vertical-align:middle;"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>${video.channel}
                    </span>
                    <a href="${createYouTubeLink(video.locator)}" class="youtube-link-badge" title="Open in YouTube">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link-icon lucide-link" style="width:14px;height:14px;display:inline;"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
                    </a>
                    ${video.file ? `<span style="color: var(--color7);">/</span> <a href="${deepLink}" class="deep-link-badge" title="Open in Obsidian"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-icon lucide-file" style="width:14px;height:14px;display:inline;"><path d="M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z"/><path d="M14 2v5a1 1 0 0 0 1 1h5"/></svg></a>` : ''}
                    <span class="video-date">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar-icon lucide-calendar" style="width:14px;height:14px;display:inline;margin-right:4px;vertical-align:middle;"><path d="M8 2v4"/><path d="M16 2v4"/><rect width="18" height="18" x="3" y="4" rx="2"/><path d="M3 10h18"/></svg>${formatDate(video.date)}
                    </span>
                </div>
                <div class="action-buttons">
                    <a href="${inboxWatchedLink}" class="btn btn-watched ${isWatched ? 'active' : ''}" title="Toggle watched + inbox">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check-icon lucide-check" style="width:14px;height:14px;"><path d="M20 6 9 17l-5-5"/></svg> Watched
                    </a>
                    <a href="${inboxLink}" class="btn btn-inbox ${isInboxActive ? 'active' : ''}" title="Toggle inbox only">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-inbox-icon lucide-inbox" style="width:14px;height:14px;"><polyline points="22 12 16 12 14 15 10 15 8 12 2 12"/><path d="M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"/></svg> Inbox
                    </a>
                </div>
                <div class="tag-toggles">
                    ${createTagToggles(video)}
                </div>
            </div>
        </div>
    `;
}

function renderStats() {
    const totalVideos = videoData.length;
    const totalDuration = videoData.reduce((sum, v) => sum + v.duration, 0);
    
    const statsElement = document.getElementById('stats');
    statsElement.innerHTML = `${totalVideos} videos â€¢ ${formatDuration(totalDuration)} total`;
}

function renderVideos() {
    const videoGrid = document.getElementById('videoGrid');
    videoGrid.innerHTML = videoData.map((video, index) => createVideoCard(video, index)).join('');
}

// Initialize the page
renderStats();
renderVideos();

    </script>
</body>
</html>
